/* =========================================
   1. 기본 레이아웃 및 폰트
   ========================================= */
body {
    font-family: 'Noto Sans KR', sans-serif;
    margin: 0;
    padding: 20px;
}

/* =========================================
   2. 상단 툴바 (Admin)
   ========================================= */
.toolbar {
    background: white;
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    display: flex;
    gap: 20px;
    align-items: center;
    flex-wrap: wrap;
}

.group {
    display: flex;
    gap: 10px;
    align-items: center;
    border-right: 1px solid #ddd;
    padding-right: 20px;
}
.group:last-child { border-right: none; }

/* 입력 필드 기본 스타일 */
input {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 60px;
    text-align: center;
}

/* [중요] 현장명 입력란 넓게 설정 (ID 우선순위 활용) */
#input-site {
    width: 250px !important;
    text-align: left !important;
    padding-left: 10px;
}

/* 버튼 스타일 */
button {
    padding: 8px 16px;
    cursor: pointer;
    border: none;
    border-radius: 4px;
    font-weight: bold;
    transition: background 0.2s;
}
.btn-primary { background-color: #2196f3; color: white; }
.btn-primary:hover { background-color: #1976d2; }
.btn-save { background-color: #4caf50; color: white; margin-left: auto; }
.btn-save:hover { background-color: #388e3c; }

/* =========================================
   3. 메인 그리드 컨테이너 (Viewer/Admin 공통)
   ========================================= */
#grid-container {
    display: flex;
    align-items: flex-end;      /* 건물 바닥 라인 맞춤 */
    justify-content: center;
    gap: 40px;                  /* 동 간격 */
    padding-bottom: 30px;
    overflow-x: auto;           /* 가로 스크롤 */
    min-height: 400px;
    border-bottom: 3px solid #555; /* 지면(Ground) 라인 */
}

/* 동 래퍼 (동 이름 + 테이블 + 범례) */
.dong-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
}

/* 동 이름 라벨 (하단) */
.dong-name {
    margin-top: 10px;
    background: #333;
    color: white;
    padding: 8px 0;
    font-weight: bold;
    border-radius: 4px;
    text-align: center;
    font-size: 1.2em;
}
/* =========================================
   4. 그리드 테이블 및 셀 스타일
   ========================================= */
.grid-table {
    border-collapse: collapse;
    box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    background: white;
}

.grid-cell {
    border: 1px solid #ccc;
    width: 60px;
    height: 40px;
    text-align: center;
    font-size: 13px;
    cursor: pointer;
    background-color: white;
    position: relative;
    
    /* [핵심 수정] 드래그 시 텍스트 선택 방지 */
    user-select: none;
    -webkit-user-select: none; /* Chrome, Safari */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE/Edge */
}

/* 드래그 선택 중 (Admin) */
.grid-cell.selected {
    background-color: #e3f2fd !important;
    border: 2px solid #2196f3 !important;
}

/* [상태 1] 삭제됨 (Void) - 아파트 모양 깎기 */
/* Admin에서는 점선으로 보여야 복구 가능, Viewer는 JS에서 border:none 처리 */
.grid-cell.void {
    background: transparent !important;
    color: transparent !important;
    border: 1px dashed #e0e0e0 !important; 
}

/* [상태 2] 사용안함/제외 (Disabled) - X 표시 */
.grid-cell.disabled {
    background-color: #f5f5f5 !important;
    color: #ccc;
    /* 대각선 X자 그리기 */
    background-image: 
        linear-gradient(to top right, transparent 48%, #ccc 49%, #ccc 51%, transparent 52%),
        linear-gradient(to bottom right, transparent 48%, #ccc 49%, #ccc 51%, transparent 52%);
}

/* [상태 3] 특수 공간 (어린이집, PH 등) */
.grid-cell.special {
    font-weight: bold;
}

/* =========================================
   5. 하단 범례 행 (Legend Row in Table)
   ========================================= */
.legend-row td {
    border-top: 3px double #555 !important; /* 본문과 구분되는 굵은 선 */
    background-color: #fff;
    vertical-align: middle;
    padding: 0;
    height: 40px;
}

/* 범례 내부 컨테이너 (상하 분할용) */
.legend-inner {
    width: 100%;
    height: 100%;
    display: flex;
    flex-direction: column;
}

/* 범례 조각 */
.legend-part {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 11px;
    font-weight: bold;
    color: #333;
    overflow: hidden;
    white-space: nowrap;
}

/* =========================================
   6. 우클릭 컨텍스트 메뉴
   ========================================= */
#context-menu {
    display: none;
    position: absolute;
    z-index: 1000;
    width: 160px;
    background: white;
    box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    border-radius: 5px;
    border: 1px solid #ddd;
    overflow: hidden;
}

#context-menu ul { list-style: none; padding: 0; margin: 0; }

#context-menu li {
    padding: 10px 15px;
    cursor: pointer;
    font-size: 14px;
    color: #333;
    border-bottom: 1px solid #eee;
    transition: background 0.1s;
}

#context-menu li:hover { background-color: #f5f5f5; }
#context-menu li:last-child { border-bottom: none; }